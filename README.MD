# ğŸŒ Sistema de Recomendaciones TurÃ­sticas

## ğŸ“‹ Tabla de Contenidos

1. [DescripciÃ³n del Proyecto](#-descripciÃ³n-del-proyecto)
2. [Arquitectura del Sistema](#-arquitectura-del-sistema)
3. [TecnologÃ­as Utilizadas](#-tecnologÃ­as-utilizadas)
4. [ğŸ“¡ WebSocket - Tiempo Real](#-websocket---tiempo-real) â† **NUEVO**
5. [Requisitos Previos](#-requisitos-previos)
6. [InstalaciÃ³n y ConfiguraciÃ³n](#-instalaciÃ³n-y-configuraciÃ³n)
7. [GuÃ­a de Uso](#-guÃ­a-de-uso)
8. [DocumentaciÃ³n de APIs](#-documentaciÃ³n-de-apis)
9. [IntegraciÃ³n entre TecnologÃ­as](#-integraciÃ³n-entre-tecnologÃ­as)
10. [Estructura del Proyecto](#-estructura-del-proyecto)
11. [Testing](#-testing)
12. [Despliegue](#-despliegue)
13. [Equipo](#-equipo)

---

## ğŸ“– DescripciÃ³n del Proyecto

Sistema integral de gestiÃ³n turÃ­stica desarrollado con **arquitectura de microservicios**, que permite administrar tours, reservas, guÃ­as turÃ­sticos, destinos y servicios adicionales. El proyecto integra mÃºltiples tecnologÃ­as y lenguajes de programaciÃ³n (TypeScript, Python, Golang) para demostrar competencias en desarrollo full-stack y arquitecturas distribuidas.

### Objetivos del Proyecto

âœ… Implementar una arquitectura de microservicios escalable  
âœ… Integrar mÃºltiples lenguajes de programaciÃ³n y frameworks  
âœ… Desarrollar APIs REST independientes que se comunican entre sÃ­  
âœ… Crear un servidor GraphQL para reportes complejos  
âœ… Implementar notificaciones en tiempo real con WebSockets  
âœ… Construir un frontend interactivo que integre todos los servicios  

### CaracterÃ­sticas Principales

- ğŸ” **AutenticaciÃ³n JWT** - Sistema de login seguro
- ğŸ“Š **Dashboard en tiempo real** - MÃ©tricas y estadÃ­sticas actualizadas
- ğŸ”” **Notificaciones instantÃ¡neas** - WebSocket para eventos en tiempo real
- ğŸ“ˆ **Reportes avanzados** - GraphQL para consultas complejas
- ğŸŒ **APIs REST** - Tres microservicios independientes
- ğŸ’¾ **Arquitectura de datos modular** - MongoDB con bases de datos separadas por servicio

---

## ğŸ—ï¸ Arquitectura del Sistema

### Arquitectura Modular de Bases de Datos

```
MongoDB (:27017)
â”œâ”€â”€ ğŸ modulo_python      â†’ Usuarios, Destinos, Recomendaciones
â”œâ”€â”€ ğŸ“˜ modulo_typescript  â†’ Tours, GuÃ­as, Reservas
â””â”€â”€ ğŸ”· modulo_go          â†’ Servicios TurÃ­sticos, Contrataciones
```

**Ventajas:**
- ğŸ”’ Aislamiento de datos por servicio
- ğŸ“Š Escalabilidad independiente
- ğŸ›¡ï¸ Seguridad granular
- ğŸ”§ Backups y migraciones independientes

### Diagrama de Arquitectura General

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (React)                               â”‚
â”‚                        Puerto: 5173 (Vite)                        â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   CRUD UI    â”‚  â”‚  Dashboard   â”‚  â”‚   Notificaciones     â”‚  â”‚
â”‚  â”‚  (REST API)  â”‚  â”‚  (GraphQL)   â”‚  â”‚    (WebSocket)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚                    â”‚
          â”‚ HTTP/HTTPS        â”‚ GraphQL            â”‚ WebSocket
          â–¼                   â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CAPA DE SERVICIOS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  TypeScript     â”‚  Python REST     â”‚  Golang     â”‚  GraphQL    â”‚
â”‚  REST API       â”‚  API             â”‚  REST API   â”‚  Server     â”‚
â”‚  Puerto: 3000   â”‚  Puerto: 5000    â”‚  Puerto:    â”‚  Puerto:    â”‚
â”‚                 â”‚                  â”‚  8080       â”‚  4000       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  â€¢ GuÃ­a   â”‚  â”‚  â”‚  â€¢ Usuario â”‚  â”‚  â”‚ â€¢Serv â”‚  â”‚  â”‚Agrega â”‚  â”‚
â”‚  â”‚  â€¢ Tour   â”‚  â”‚  â”‚  â€¢ Destino â”‚  â”‚  â”‚ â€¢Cont â”‚  â”‚  â”‚ Datos â”‚  â”‚
â”‚  â”‚  â€¢ Reservaâ”‚  â”‚  â”‚  â€¢ Recomen â”‚  â”‚  â”‚       â”‚  â”‚  â”‚       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚        â”‚        â”‚         â”‚        â”‚       â”‚     â”‚       â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜
         â”‚                  â”‚                â”‚             â”‚
         â–¼                  â–¼                â–¼             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚               CAPA DE NOTIFICACIONES
â”‚         WebSocket Server - Puerto: 8081
â”‚   Transmite eventos en tiempo real al Dashboard
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            CAPA DE DATOS                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PostgreSQL    â”‚  PostgreSQL    â”‚  PostgreSQL   â”‚
â”‚  tours_db      â”‚  usuarios_db   â”‚  servicios_db â”‚
â”‚  Puerto: 5432  â”‚  Puerto: 5433  â”‚  Puerto: 5434 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Arquitectura de Microservicios

El sistema estÃ¡ compuesto por **6 componentes independientes**:

1. **Backend TypeScript (REST)** - GestiÃ³n de GuÃ­as, Tours y Reservas
2. **Backend Python (REST)** - AutenticaciÃ³n, Usuarios, Destinos y Recomendaciones
3. **Backend Golang (REST)** - GestiÃ³n de Servicios adicionales
4. **GraphQL Server** - Agregador de datos para reportes
5. **WebSocket Server** - Notificaciones en tiempo real
6. **Frontend** - Interfaz de usuario unificada

### Flujo de Datos

```
Usuario â†’ Frontend â†’ REST APIs â†’ Bases de Datos
                  â†“
            GraphQL Server (consulta REST APIs)
                  â†“
            Dashboard con Reportes
                  
REST APIs â†’ WebSocket Server â†’ Frontend (tiempo real)
```

---

## ï¿½ WebSocket - Tiempo Real

### ğŸ¯ CaracterÃ­sticas

âœ¨ **Dashboard en Tiempo Real** - VisualizaciÃ³n de eventos instantÃ¡neos  
ğŸ”” **Notificaciones AutomÃ¡ticas** - Alertas de operaciones en las APIs  
ğŸ“Š **EstadÃ­sticas en Vivo** - MÃ©tricas del sistema actualizadas  
ğŸ”— **IntegraciÃ³n Multi-API** - Eventos de Python, TypeScript y Go  
ğŸ›ï¸ **Salas/Canales** - Eventos organizados por tipo de dato  

### ğŸ—ï¸ Arquitectura WebSocket

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            WebSocket Server (Node.js)               â”‚
â”‚            Puerto: 8081                              â”‚
â”‚  â€¢ Socket.io para eventos bidireccionales            â”‚
â”‚  â€¢ Salas: usuarios, destinos, tours, servicios       â”‚
â”‚  â€¢ ReconexiÃ³n automÃ¡tica                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚           â”‚           â”‚
     â–¼           â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Python  â”‚ â”‚TypeScriptâ”‚ â”‚   Go   â”‚
â”‚  API    â”‚ â”‚  API   â”‚ â”‚  API   â”‚
â”‚:8000   â”‚ â”‚:3000  â”‚ â”‚:8080   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚           â”‚           â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         (POST /notify)
                 â”‚
                 â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   Frontend (React)   â”‚
     â”‚  useWebsocket Hook   â”‚
     â”‚  Realtime Dashboard  â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“¤ Tipos de Eventos

**Usuarios (Python):**
```
user_created, user_updated, user_deleted, user_logged_in, user_logged_out
```

**Destinos (Python):**
```
destino_created, destino_updated, destino_deleted
```

**Tours (TypeScript):**
```
tour_created, tour_updated, tour_deleted, tour_booked
```

**Servicios (Go):**
```
servicio_created, servicio_updated, servicio_deleted, contratacion_created
```

### ğŸš€ Uso RÃ¡pido

```bash
# Iniciar WebSocket Server
cd backend/websocket-server
npm run dev  # Puerto: 8081
```

**Acceso en AdminDashboard:**
```
http://localhost:5173/admin â†’ PestaÃ±a "Tiempo Real"
```

**Enviar evento:**
```bash
curl -X POST http://localhost:8081/notify \
  -H "Content-Type: application/json" \
  -d '{
    "event": "user_created",
    "data": {"user_id": "1", "username": "test", "email": "test@example.com"},
    "room": "usuarios",
    "source": "python_api"
  }'
```

### ğŸ“– DocumentaciÃ³n Completa

Ver archivos:
- `WEBSOCKET_README.md` - DescripciÃ³n general
- `WEBSOCKET_INTEGRATION_GUIDE.md` - GuÃ­a de integraciÃ³n por API
- `WEBSOCKET_TESTING_GUIDE.md` - GuÃ­a de pruebas

---



| TecnologÃ­a | VersiÃ³n | PropÃ³sito |
|------------|---------|-----------|
| Node.js | 20+ | Runtime de JavaScript |
| TypeScript | 5.9+ | Lenguaje tipado |
| Express | 4.18+ | Framework web |
| TypeORM | 0.3+ | ORM para PostgreSQL |
| PostgreSQL | 14+ | Base de datos relacional |
| class-validator | 0.14+ | ValidaciÃ³n de datos |
| jsonwebtoken | 9.0+ | ValidaciÃ³n de JWT |
| axios | 1.6+ | Cliente HTTP |

### Backend Python (Puerto 5000)

| TecnologÃ­a | VersiÃ³n | PropÃ³sito |
|------------|---------|-----------|
| Python | 3.10+ | Lenguaje de programaciÃ³n |
| Flask / FastAPI | Latest | Framework web |
| SQLAlchemy | Latest | ORM para PostgreSQL |
| PostgreSQL | 14+ | Base de datos |
| PyJWT | Latest | GeneraciÃ³n de JWT |
| Pydantic | Latest | ValidaciÃ³n de datos |

### Backend Golang (Puerto 8080)

| TecnologÃ­a | VersiÃ³n | PropÃ³sito |
|------------|---------|-----------|
| Go | 1.21+ | Lenguaje de programaciÃ³n |
| Gin / Echo | Latest | Framework web |
| GORM | Latest | ORM para PostgreSQL |
| PostgreSQL | 14+ | Base de datos |

### GraphQL Server (Puerto 4000)

| TecnologÃ­a | PropÃ³sito |
|------------|-----------|
| Apollo Server (Node) / Graphene (Python) | Servidor GraphQL |
| DataSources | IntegraciÃ³n con REST APIs |

### WebSocket Server (Puerto 8081)

| TecnologÃ­a | PropÃ³sito |
|------------|-----------|
| Socket.io (Node) / Gorilla (Go) / Tokio (Rust) | ComunicaciÃ³n bidireccional en tiempo real |

### Frontend (Puerto 5173)

| TecnologÃ­a | VersiÃ³n | PropÃ³sito |
|------------|---------|-----------|
| React / Vue / Angular | Latest | Framework de UI |
| Vite | 5+ | Build tool |
| Axios | Latest | Cliente HTTP REST |
| Apollo Client | Latest | Cliente GraphQL |
| Socket.io Client | Latest | Cliente WebSocket |
| TailwindCSS | Latest | Estilos |

---

## âœ… Requisitos Previos

Antes de instalar el proyecto, asegÃºrate de tener instalado:

### Software Requerido

- **Node.js** v20 o superior â†’ [Descargar](https://nodejs.org/)
- **MongoDB** v4.4 o superior â†’ [Descargar](https://www.mongodb.com/try/download/community)
- **Python** v3.10 o superior â†’ [Descargar](https://www.python.org/)
- **Go** v1.21 o superior â†’ [Descargar](https://go.dev/)
- **Git** â†’ [Descargar](https://git-scm.com/)

### Herramientas Recomendadas

- **Visual Studio Code** - Editor de cÃ³digo
- **Postman** o **Thunder Client** - Testing de APIs
- **MongoDB Compass** - Cliente GUI para MongoDB
- **Docker** (opcional) - Para contenedores

### Verificar Instalaciones

```powershell
# Node.js y npm
node --version  # Debe mostrar v20+
npm --version

# MongoDB
mongosh --version  # MongoDB Shell

# Python
python --version  # Debe mostrar 3.10+

# Go
go version  # Debe mostrar 1.21+

# Git
git --version
```

---

## ğŸš€ InstalaciÃ³n y ConfiguraciÃ³n

### Paso 0: Configurar MongoDB

Antes de configurar los servicios, debes inicializar MongoDB:

```powershell
# Ejecuta el script de configuraciÃ³n automÃ¡tica
.\setup-mongodb.ps1
```

Este script:
- âœ… Verifica que MongoDB estÃ© instalado y corriendo
- âœ… Crea las 3 bases de datos modulares
- âœ… Configura Ã­ndices optimizados
- âœ… Genera archivos `.env` desde los ejemplos

**Consulta la guÃ­a completa:** [MONGODB_MIGRATION.md](./MONGODB_MIGRATION.md)

### 1ï¸âƒ£ Clonar el Repositorio

```powershell
git clone https://github.com/odaliasengell/ProyectoSWEB_RecomendacionesTuristicas.git
cd backend
```

### 2ï¸âƒ£ Configurar PostgreSQL Local

#### Crear las 3 bases de datos:

```bash
# Abrir psql
psql -U postgres

# Crear bases de datos
CREATE DATABASE tours_db;
CREATE DATABASE usuarios_db;
CREATE DATABASE servicios_db;

# Verificar
\l

# Salir
\q
```

#### Configurar puertos (si usas mÃºltiples instancias):

**OpciÃ³n A: Una instancia PostgreSQL (Recomendado para desarrollo)**
```
Puerto Ãºnico: 5432
Bases de datos: tours_db, usuarios_db, servicios_db
```

**OpciÃ³n B: Tres instancias PostgreSQL separadas**
```
Instancia 1: Puerto 5432 â†’ tours_db
Instancia 2: Puerto 5433 â†’ usuarios_db
Instancia 3: Puerto 5434 â†’ servicios_db
```

### 3ï¸âƒ£ Configurar Backend TypeScript

```bash
cd backend-typescript-rest

# Instalar dependencias
npm install

# Crear archivo .env
cp .env.example .env
```

#### Editar `.env`:

```env
# SERVIDOR
PORT=3000
NODE_ENV=development

# BASE DE DATOS POSTGRESQL
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=tu_password_aqui
DB_DATABASE=tours_db

# JWT (mismo secreto que Python)
JWT_SECRET=mi_secreto_super_seguro_2024

# SERVICIOS EXTERNOS
PYTHON_API_URL=http://localhost:5000
GOLANG_API_URL=http://localhost:8080
GRAPHQL_API_URL=http://localhost:4000
WEBSOCKET_URL=http://localhost:8081
```

#### Iniciar servidor:

```bash
# Desarrollo con recarga automÃ¡tica
npm run dev

# El servidor estarÃ¡ en http://localhost:3000
```

### 4ï¸âƒ£ Configurar Backend Python

```bash
cd backend-python-rest

# Crear entorno virtual
python -m venv venv

# Activar entorno virtual
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# Instalar dependencias
pip install -r requirements.txt

# Crear archivo .env
cp .env.example .env
```

#### Editar `.env`:

```env
PORT=5000
DATABASE_URL=postgresql://postgres:tu_password@localhost:5432/usuarios_db
JWT_SECRET=mi_secreto_super_seguro_2024
TYPESCRIPT_API_URL=http://localhost:3000
GOLANG_API_URL=http://localhost:8080
```

#### Iniciar servidor:

```bash
# Flask
python main.py

# O FastAPI
uvicorn main:app --reload --port 5000

# El servidor estarÃ¡ en http://localhost:5000
```

### 5ï¸âƒ£ Configurar Backend Golang

```bash
cd backend-golang-rest

# Inicializar mÃ³dulo (si no existe)
go mod init backend-golang-rest

# Instalar dependencias
go mod tidy

# Crear archivo .env
cp .env.example .env
```

#### Editar `.env`:

```env
PORT=8080
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=tu_password
DB_NAME=servicios_db
TYPESCRIPT_API_URL=http://localhost:3000
PYTHON_API_URL=http://localhost:5000
```

#### Iniciar servidor:

```bash
go run cmd/api/main.go

# El servidor estarÃ¡ en http://localhost:8080
```

### 6ï¸âƒ£ Configurar GraphQL Server

```bash
cd graphql-server

# Si es Node.js
npm install
npm run dev

# Si es Python
pip install -r requirements.txt
python server.py

# El servidor estarÃ¡ en http://localhost:4000
```

### 7ï¸âƒ£ Configurar WebSocket Server

```bash
cd websocket-server

# SegÃºn tecnologÃ­a elegida
npm install / pip install / go mod tidy
npm run dev / python server.py / go run main.go

# El servidor estarÃ¡ en http://localhost:8081
```

### 8ï¸âƒ£ Configurar Frontend

```bash
cd frontend

# Instalar dependencias
npm install

# Crear archivo .env
cp .env.example .env
```

#### Editar `.env`:

```env
VITE_TYPESCRIPT_API=http://localhost:3000
VITE_PYTHON_API=http://localhost:5000
VITE_GOLANG_API=http://localhost:8080
VITE_GRAPHQL_API=http://localhost:4000
VITE_WEBSOCKET_URL=ws://localhost:8081
```

#### Iniciar aplicaciÃ³n:

```bash
npm run dev

# La aplicaciÃ³n estarÃ¡ en http://localhost:5173
```

---

## ğŸ“š GuÃ­a de Uso

### ğŸ” 1. AutenticaciÃ³n

#### Registrar Usuario (Python API)

```bash
POST http://localhost:5000/api/auth/register
Content-Type: application/json

{
  "nombre": "Juan PÃ©rez",
  "email": "juan@example.com",
  "contraseÃ±a": "password123",
  "pais": "Ecuador"
}
```

#### Iniciar SesiÃ³n

```bash
POST http://localhost:5000/api/auth/login
Content-Type: application/json

{
  "email": "juan@example.com",
  "contraseÃ±a": "password123"
}
```

**Respuesta:**
```json
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "usuario": {
      "id_usuario": 1,
      "nombre": "Juan PÃ©rez",
      "email": "juan@example.com"
    }
  }
}
```

**Importante:** Guarda el token para usarlo en las siguientes peticiones.

---

### ğŸ‘¨â€ğŸ« 2. GestiÃ³n de GuÃ­as (TypeScript API)

#### Crear GuÃ­a

```bash
POST http://localhost:3000/api/guias
Content-Type: application/json
Authorization: Bearer <tu_token_jwt>

{
  "nombre": "MarÃ­a GonzÃ¡lez",
  "idiomas": "EspaÃ±ol, InglÃ©s, FrancÃ©s",
  "experiencia": "10 aÃ±os guiando tours en GalÃ¡pagos",
  "email": "maria@tours.com",
  "telefono": "+593987654321",
  "disponible": true,
  "calificacion": 4.8
}
```

#### Listar GuÃ­as

```bash
GET http://localhost:3000/api/guias
Authorization: Bearer <tu_token_jwt>
```

#### Obtener GuÃ­a por ID

```bash
GET http://localhost:3000/api/guias/1
Authorization: Bearer <tu_token_jwt>
```

#### Actualizar GuÃ­a

```bash
PUT http://localhost:3000/api/guias/1
Content-Type: application/json
Authorization: Bearer <tu_token_jwt>

{
  "calificacion": 4.9,
  "disponible": false
}
```

#### Eliminar GuÃ­a

```bash
DELETE http://localhost:3000/api/guias/1
Authorization: Bearer <tu_token_jwt>
```

---

### ğŸ—ºï¸ 3. GestiÃ³n de Destinos (Python API)

#### Crear Destino

```bash
POST http://localhost:5000/api/destinos
Content-Type: application/json
Authorization: Bearer <tu_token_jwt>

{
  "nombre": "Islas GalÃ¡pagos",
  "descripcion": "ParaÃ­so natural Ãºnico en el mundo",
  "ubicacion": "Ecuador",
  "ruta": "Puerto Ayora, Santa Cruz"
}
```

#### Listar Destinos

```bash
GET http://localhost:5000/api/destinos
Authorization: Bearer <tu_token_jwt>
```

---

### ğŸ« 4. GestiÃ³n de Tours (TypeScript API)

#### Crear Tour

```bash
POST http://localhost:3000/api/tours
Content-Type: application/json
Authorization: Bearer <tu_token_jwt>

{
  "nombre": "Tour GalÃ¡pagos Premium",
  "descripcion": "Experiencia Ãºnica visitando las islas mÃ¡s emblemÃ¡ticas",
  "duracion": "7 dÃ­as / 6 noches",
  "precio": 1500.00,
  "capacidad_maxima": 12,
  "id_guia": 1,
  "id_destino": 1,
  "id_servicios": [1, 2, 3]
}
```

**Nota:** El sistema automÃ¡ticamente consulta:
- InformaciÃ³n del guÃ­a (base de datos local)
- InformaciÃ³n del destino (API Python)
- InformaciÃ³n de servicios (API Golang)

#### Listar Tours (con datos enriquecidos)

```bash
GET http://localhost:3000/api/tours
Authorization: Bearer <tu_token_jwt>
```

**Respuesta:**
```json
{
  "success": true,
  "data": [
    {
      "id_tour": 1,
      "nombre": "Tour GalÃ¡pagos Premium",
      "descripcion": "Experiencia Ãºnica...",
      "duracion": "7 dÃ­as / 6 noches",
      "precio": 1500.00,
      "guia": {
        "id_guia": 1,
        "nombre": "MarÃ­a GonzÃ¡lez",
        "idiomas": "EspaÃ±ol, InglÃ©s, FrancÃ©s"
      },
      "destino": {
        "id_destino": 1,
        "nombre": "Islas GalÃ¡pagos",
        "ubicacion": "Ecuador"
      },
      "servicios": [
        { "id_servicio": 1, "nombre": "Transporte", "precio": 200 },
        { "id_servicio": 2, "nombre": "AlimentaciÃ³n", "precio": 150 }
      ]
    }
  ]
}
```

---

### ğŸ“… 5. GestiÃ³n de Reservas (TypeScript API)

#### Crear Reserva

```bash
POST http://localhost:3000/api/reservas
Content-Type: application/json
Authorization: Bearer <tu_token_jwt>

{
  "id_usuario": 1,
  "id_tour": 1,
  "fecha_reserva": "2025-11-15",
  "cantidad_personas": 3,
  "comentarios": "Viaje familiar, necesitamos habitaciones contiguas"
}
```

**El sistema automÃ¡ticamente:**
1. Valida que el usuario existe (consulta API Python)
2. Valida que el tour existe y estÃ¡ disponible
3. Calcula el precio total (precio_tour Ã— cantidad_personas)
4. Crea la reserva con estado "pendiente"
5. Notifica al WebSocket sobre la nueva reserva

#### Listar Reservas

```bash
GET http://localhost:3000/api/reservas
Authorization: Bearer <tu_token_jwt>
```

#### Reservas de un Usuario especÃ­fico

```bash
GET http://localhost:3000/api/reservas/usuario/1
Authorization: Bearer <tu_token_jwt>
```

#### Actualizar Estado de Reserva

```bash
PATCH http://localhost:3000/api/reservas/1/estado
Content-Type: application/json
Authorization: Bearer <tu_token_jwt>

{
  "estado": "confirmada"
}
```

Posibles estados: `pendiente`, `confirmada`, `cancelada`, `completada`

---

### ğŸ›ï¸ 6. GestiÃ³n de Servicios (Golang API)

#### Crear Servicio

```bash
POST http://localhost:8080/api/servicios
Content-Type: application/json
Authorization: Bearer <tu_token_jwt>

{
  "nombre": "Transporte Aeropuerto",
  "descripcion": "Traslado desde/hacia el aeropuerto",
  "precio": 50.00
}
```

#### Listar Servicios

```bash
GET http://localhost:8080/api/servicios
Authorization: Bearer <tu_token_jwt>
```

#### Obtener mÃºltiples servicios por IDs

```bash
POST http://localhost:8080/api/servicios/batch
Content-Type: application/json
Authorization: Bearer <tu_token_jwt>

{
  "ids": [1, 2, 3]
}
```

---

### ğŸ“Š 7. Reportes con GraphQL

#### Consultar Tours Populares

```graphql
POST http://localhost:4000/graphql
Content-Type: application/json

{
  "query": "query { toursPopulares(limit: 10) { id_tour nombre precio total_reservas destino { nombre ubicacion } guia { nombre calificacion } } }"
}
```

#### EstadÃ­sticas de Reservas por Mes

```graphql
{
  "query": "query { reservasPorMes(aÃ±o: 2025) { mes total_reservas ingresos_totales } }"
}
```

#### GuÃ­as Mejor Calificados

```graphql
{
  "query": "query { guiasMejorCalificados(limit: 5) { nombre calificacion total_tours idiomas } }"
}
```

---

### ğŸ”” 8. Notificaciones en Tiempo Real

#### Conectar al WebSocket (desde Frontend)

```javascript
import io from 'socket.io-client';

const socket = io('http://localhost:8081');

// Escuchar nueva reserva
socket.on('nueva_reserva', (data) => {
  console.log('Nueva reserva:', data);
  // Actualizar UI
});

// Escuchar tour actualizado
socket.on('tour_actualizado', (data) => {
  console.log('Tour actualizado:', data);
  // Actualizar lista de tours
});

// Escuchar guÃ­a disponible
socket.on('guia_disponible', (data) => {
  console.log('GuÃ­a cambiÃ³ disponibilidad:', data);
});
```

#### Eventos Disponibles

| Evento | DescripciÃ³n | Datos |
|--------|-------------|-------|
| `nueva_reserva` | Se creÃ³ una nueva reserva | `{ id_reserva, tour, usuario, timestamp }` |
| `reserva_confirmada` | Reserva fue confirmada | `{ id_reserva, estado }` |
| `tour_actualizado` | Tour fue modificado | `{ id_tour, nombre, cambios[] }` |
| `guia_disponible` | GuÃ­a cambiÃ³ disponibilidad | `{ id_guia, nombre, disponible }` |
| `nuevo_destino` | Nuevo destino agregado | `{ id_destino, nombre }` |

---

## ğŸ“¡ DocumentaciÃ³n de APIs

### Backend TypeScript REST API

**Base URL:** `http://localhost:3000/api`

#### Endpoints de GuÃ­as

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| GET | `/guias` | Listar todos los guÃ­as | âœ… |
| GET | `/guias/disponibles` | Listar guÃ­as disponibles | âœ… |
| GET | `/guias/:id` | Obtener guÃ­a por ID | âœ… |
| POST | `/guias` | Crear nuevo guÃ­a | âœ… |
| PUT | `/guias/:id` | Actualizar guÃ­a | âœ… |
| PATCH | `/guias/:id/disponibilidad` | Cambiar disponibilidad | âœ… |
| DELETE | `/guias/:id` | Eliminar guÃ­a | âœ… |

#### Endpoints de Tours

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| GET | `/tours` | Listar todos los tours (con datos completos) | âœ… |
| GET | `/tours/disponibles` | Listar tours disponibles | âœ… |
| GET | `/tours/:id` | Obtener tour por ID (con destino y servicios) | âœ… |
| POST | `/tours` | Crear nuevo tour | âœ… |
| PUT | `/tours/:id` | Actualizar tour | âœ… |
| PATCH | `/tours/:id/disponibilidad` | Cambiar disponibilidad | âœ… |
| DELETE | `/tours/:id` | Eliminar tour | âœ… |

#### Endpoints de Reservas

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| GET | `/reservas` | Listar todas las reservas | âœ… |
| GET | `/reservas/usuario/:id` | Reservas de un usuario especÃ­fico | âœ… |
| GET | `/reservas/:id` | Obtener reserva por ID | âœ… |
| POST | `/reservas` | Crear nueva reserva | âœ… |
| PUT | `/reservas/:id` | Actualizar reserva | âœ… |
| PATCH | `/reservas/:id/estado` | Cambiar estado de reserva | âœ… |
| DELETE | `/reservas/:id` | Cancelar reserva | âœ… |

#### Formatos de Request/Response

**Crear GuÃ­a - POST `/guias`**

Request:
```json
{
  "nombre": "string (required, 3-100 chars)",
  "idiomas": "string (required, max 50 chars)",
  "experiencia": "string (required)",
  "email": "string (required, valid email)",
  "telefono": "string (required, max 20 chars)",
  "disponible": "boolean (optional, default: true)",
  "calificacion": "number (optional, 0-5, default: 0)"
}
```

Response:
```json
{
  "success": true,
  "message": "GuÃ­a creado exitosamente",
  "data": {
    "id_guia": 1,
    "nombre": "MarÃ­a GonzÃ¡lez",
    "idiomas": "EspaÃ±ol, InglÃ©s, FrancÃ©s",
    "experiencia": "10 aÃ±os...",
    "email": "maria@tours.com",
    "telefono": "+593987654321",
    "disponible": true,
    "calificacion": 4.8,
    "createdAt": "2025-10-06T10:00:00Z",
    "updatedAt": "2025-10-06T10:00:00Z"
  },
  "timestamp": "2025-10-06T10:00:00Z"
}
```

**Crear Tour - POST `/tours`**

Request:
```json
{
  "nombre": "string (required, max 150 chars)",
  "descripcion": "string (required)",
  "duracion": "string (required, max 50 chars)",
  "precio": "number (required, >= 0)",
  "capacidad_maxima": "number (optional, >= 1, default: 10)",
  "disponible": "boolean (optional, default: true)",
  "id_guia": "number (required)",
  "id_destino": "number (required)",
  "id_servicios": "number[] (optional)"
}
```

**Crear Reserva - POST `/reservas`**

Request:
```json
{
  "id_usuario": "number (required)",
  "id_tour": "number (required)",
  "fecha_reserva": "date (required, formato: YYYY-MM-DD)",
  "cantidad_personas": "number (required, >= 1)",
  "comentarios": "string (optional)"
}
```

Response:
```json
{
  "success": true,
  "message": "Reserva creada exitosamente",
  "data": {
    "id_reserva": 100,
    "id_usuario": 1,
    "id_tour": 1,
    "fecha_reserva": "2025-11-15",
    "cantidad_personas": 3,
    "estado": "pendiente",
    "precio_total": 4500.00,
    "comentarios": "Viaje familiar",
    "createdAt": "2025-10-06T12:00:00Z"
  }
}
```

#### CÃ³digos de Estado HTTP

| CÃ³digo | Significado | CuÃ¡ndo se usa |
|--------|-------------|---------------|
| 200 | OK | OperaciÃ³n exitosa (GET, PUT, PATCH) |
| 201 | Created | Recurso creado exitosamente (POST) |
| 400 | Bad Request | Datos invÃ¡lidos o incompletos |
| 401 | Unauthorized | Token JWT invÃ¡lido o ausente |
| 404 | Not Found | Recurso no encontrado |
| 500 | Internal Server Error | Error del servidor |

---

### Backend Python REST API

**Base URL:** `http://localhost:5000/api`

#### Endpoints de AutenticaciÃ³n

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| POST | `/auth/register` | Registrar nuevo usuario | âŒ |
| POST | `/auth/login` | Iniciar sesiÃ³n (retorna JWT) | âŒ |
| POST | `/auth/logout` | Cerrar sesiÃ³n | âœ… |
| GET | `/auth/profile` | Obtener perfil del usuario | âœ… |

#### Endpoints de Usuarios

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| GET | `/usuarios` | Listar todos los usuarios | âœ… |
| GET | `/usuarios/:id` | Obtener usuario por ID | âœ… |
| PUT | `/usuarios/:id` | Actualizar usuario | âœ… |
| DELETE | `/usuarios/:id` | Eliminar usuario | âœ… |

#### Endpoints de Destinos

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| GET | `/destinos` | Listar todos los destinos | âœ… |
| GET | `/destinos/:id` | Obtener destino por ID | âœ… |
| POST | `/destinos` | Crear nuevo destino | âœ… |
| PUT | `/destinos/:id` | Actualizar destino | âœ… |
| DELETE | `/destinos/:id` | Eliminar destino | âœ… |

#### Endpoints de Recomendaciones

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| GET | `/recomendaciones` | Listar recomendaciones | âœ… |
| GET | `/recomendaciones/usuario/:id` | Recomendaciones de un usuario | âœ… |
| POST | `/recomendaciones` | Publicar recomendaciÃ³n | âœ… |
| DELETE | `/recomendaciones/:id` | Eliminar recomendaciÃ³n | âœ… |

---

### Backend Golang REST API

**Base URL:** `http://localhost:8080/api`

#### Endpoints de Servicios

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| GET | `/servicios` | Listar todos los servicios | âœ… |
| GET | `/servicios/:id` | Obtener servicio por ID | âœ… |
| POST | `/servicios/batch` | Obtener mÃºltiples servicios por IDs | âœ… |
| POST | `/servicios` | Crear nuevo servicio | âœ… |
| PUT | `/servicios/:id` | Actualizar servicio | âœ… |
| DELETE | `/servicios/:id` | Eliminar servicio | âœ… |

#### Endpoints de ContrataciÃ³n de Servicios

| MÃ©todo | Endpoint | DescripciÃ³n | Auth |
|--------|----------|-------------|------|
| GET | `/contrataciones` | Listar contrataciones | âœ… |
| GET | `/contrataciones/usuario/:id` | Contrataciones de un usuario | âœ… |
| POST | `/contrataciones` | Contratar servicio | âœ… |
| DELETE | `/contrataciones/:id` | Cancelar contrataciÃ³n | âœ… |

---

### GraphQL API

**Base URL:** `http://localhost:4000/graphql`

#### Schema GraphQL

```graphql
type Query {
  # Tours
  toursPopulares(limit: Int): [TourPopular]
  tourDetalle(id: Int!): TourDetallado
  
  # Reservas
  reservasPorMes(aÃ±o: Int!): [EstadisticaMensual]
  reservasPorEstado: [ReservaEstadistica]
  
  # GuÃ­as
  guiasMejorCalificados(limit: Int): [GuiaEstadistica]
  guiaDetalle(id: Int!): GuiaDetallado
  
  # Destinos
  destinosMasVisitados: [DestinoEstadistica]
  destinoDetalle(id: Int!): DestinoDetallado
  
  # Dashboard
  estadisticasGenerales: EstadisticasGenerales
}

type TourPopular {
  id_tour: Int
  nombre: String
  precio: Float
  total_reservas: Int
  destino: Destino
  guia: Guia
  servicios: [Servicio]
}

type EstadisticaMensual {
  mes: Int
  aÃ±o: Int
  total_reservas: Int
  ingresos_totales: Float
  promedio_personas: Float
}

type GuiaEstadistica {
  id_guia: Int
  nombre: String
  calificacion: Float
  total_tours: Int
  total_reservas: Int
  idiomas: String
}

type EstadisticasGenerales {
  total_tours: Int
  total_reservas: Int
  total_usuarios: Int
  ingresos_totales: Float
  promedio_calificacion_guias: Float
}
```

#### Ejemplos de Queries

**Tours Populares:**
```graphql
query {
  toursPopulares(limit: 10) {
    id_tour
    nombre
    precio
    total_reservas
    destino {
      nombre
      ubicacion
    }
    guia {
      nombre
      calificacion
      idiomas
    }
    servicios {
      nombre
      precio
    }
  }
}
```

**EstadÃ­sticas del Dashboard:**
```graphql
query {
  estadisticasGenerales {
    total_tours
    total_reservas
    total_usuarios
    ingresos_totales
    promedio_calificacion_guias
  }
}
```

**Reservas por Mes:**
```graphql
query {
  reservasPorMes(aÃ±o: 2025) {
    mes
    total_reservas
    ingresos_totales
    promedio_personas
  }
}
```

---

## ğŸ”— IntegraciÃ³n entre TecnologÃ­as

### Flujo Completo de IntegraciÃ³n

#### 1. Usuario Crea una Reserva

```mermaid
sequenceDiagram
    participant U as Usuario
    participant F as Frontend
    participant P as Python API
    participant T as TypeScript API
    participant W as WebSocket
    participant D as Dashboard

    U->>F: Hacer reserva
    F->>P: POST /auth/login
    P->>F: JWT Token
    F->>T: POST /reservas (con JWT)
    T->>P: Validar usuario
    P->>T: Usuario vÃ¡lido
    T->>T: Validar tour
    T->>T: Calcular precio
    T->>T: Crear reserva
    T->>W: Notificar nueva_reserva
    W->>D: Broadcast evento
    T->>F: Reserva creada
    F->>U: ConfirmaciÃ³n
```

**Paso a paso:**

1. **Usuario inicia sesiÃ³n** â†’ Frontend llama a Python API
2. **Python valida credenciales** â†’ Retorna JWT Token
3. **Frontend guarda JWT** en localStorage
4. **Usuario crea reserva** â†’ Frontend envÃ­a datos con JWT a TypeScript API
5. **TypeScript valida JWT** â†’ Llama a Python para verificar usuario
6. **TypeScript valida tour** â†’ Verifica disponibilidad
7. **TypeScript calcula precio** â†’ `precio_tour Ã— cantidad_personas`
8. **TypeScript crea reserva** en base de datos local
9. **TypeScript notifica WebSocket** â†’ Evento `nueva_reserva`
10. **WebSocket transmite** a todos los dashboards conectados
11. **Dashboard actualiza** en tiempo real

#### 2. Frontend Obtiene Tour Completo

```mermaid
sequenceDiagram
    participant F as Frontend
    participant T as TypeScript API
    participant P as Python API
    participant G as Golang API

    F->>T: GET /tours/1
    T->>T: Buscar tour en BD
    T->>P: GET /destinos/:id
    P->>T: Datos del destino
    T->>G: POST /servicios/batch
    G->>T: Datos de servicios
    T->>T: Combinar informaciÃ³n
    T->>F: Tour completo
```

**Paso a paso:**

1. **Frontend solicita tour** â†’ GET `/api/tours/1`
2. **TypeScript busca tour** en su base de datos
3. **TypeScript consulta Python** â†’ Obtiene destino (`id_destino`)
4. **TypeScript consulta Golang** â†’ Obtiene servicios (`id_servicios[]`)
5. **TypeScript combina datos** de las 3 fuentes
6. **TypeScript retorna tour enriquecido** al frontend

**Ejemplo de respuesta enriquecida:**
```json
{
  "id_tour": 1,
  "nombre": "Tour GalÃ¡pagos Premium",
  "precio": 1500,
  "guia": {
    "id_guia": 1,
    "nombre": "MarÃ­a GonzÃ¡lez"
  },
  "destino": {
    "id_destino": 5,
    "nombre": "Islas GalÃ¡pagos",
    "ubicacion": "Ecuador"
  },
  "servicios": [
    { "id_servicio": 1, "nombre": "Transporte", "precio": 200 },
    { "id_servicio": 2, "nombre": "AlimentaciÃ³n", "precio": 150 }
  ]
}
```

#### 3. Dashboard Muestra Reportes (GraphQL)

```mermaid
sequenceDiagram
    participant D as Dashboard
    participant GQL as GraphQL Server
    participant T as TypeScript API
    participant P as Python API
    participant G as Golang API

    D->>GQL: Query toursPopulares
    GQL->>T: GET /tours
    GQL->>T: GET /reservas
    GQL->>P: GET /destinos
    GQL->>P: GET /usuarios
    GQL->>G: GET /servicios
    GQL->>GQL: Agregar y calcular
    GQL->>D: Resultado combinado
```

**Paso a paso:**

1. **Dashboard hace query GraphQL** â†’ `toursPopulares(limit: 10)`
2. **GraphQL consulta TypeScript** â†’ Lista de tours
3. **GraphQL consulta TypeScript** â†’ Reservas por tour
4. **GraphQL consulta Python** â†’ InformaciÃ³n de destinos
5. **GraphQL consulta Golang** â†’ InformaciÃ³n de servicios
6. **GraphQL agrega datos** â†’ Calcula totales, promedios
7. **GraphQL retorna resultado unificado** al dashboard

**Ventaja:** Una sola peticiÃ³n GraphQL reemplaza mÃºltiples llamadas REST.

#### 4. Notificaciones en Tiempo Real

```mermaid
sequenceDiagram
    participant T as TypeScript API
    participant W as WebSocket Server
    participant D1 as Dashboard 1
    participant D2 as Dashboard 2
    participant D3 as Dashboard 3

    T->>W: POST /notify (nueva_reserva)
    W->>D1: Emit evento
    W->>D2: Emit evento
    W->>D3: Emit evento
    D1->>D1: Actualizar UI
    D2->>D2: Actualizar UI
    D3->>D3: Actualizar UI
```

**Paso a paso:**

1. **TypeScript crea reserva** â†’ Guarda en BD
2. **TypeScript notifica WebSocket** â†’ POST `/notify`
3. **WebSocket recibe evento** â†’ `nueva_reserva`
4. **WebSocket transmite** a todos los clientes conectados
5. **Dashboards actualizan** automÃ¡ticamente sin recargar

---

### ComunicaciÃ³n entre Microservicios

#### TypeScript â†” Python

**Validar Usuario:**
```typescript
// TypeScript llama a Python
const usuario = await axios.get(
  `${PYTHON_API_URL}/api/usuarios/${id_usuario}`,
  { headers: { Authorization: `Bearer ${token}` } }
);
```

**Obtener Destino:**
```typescript
// TypeScript llama a Python
const destino = await axios.get(
  `${PYTHON_API_URL}/api/destinos/${id_destino}`
);
```

#### TypeScript â†” Golang

**Obtener Servicios:**
```typescript
// TypeScript llama a Golang
const servicios = await axios.post(
  `${GOLANG_API_URL}/api/servicios/batch`,
  { ids: [1, 2, 3] }
);
```

#### Cualquier API â†’ WebSocket

**Notificar Evento:**
```typescript
// Desde TypeScript
await axios.post(`${WEBSOCKET_URL}/notify`, {
  event: 'nueva_reserva',
  data: { id_reserva, tour, usuario },
  timestamp: new Date().toISOString()
});
```

```python
# Desde Python
requests.post(f"{WEBSOCKET_URL}/notify", json={
    "event": "nuevo_usuario",
    "data": {"id_usuario": user.id, "nombre": user.nombre}
})
```

```go
// Desde Golang
http.Post(websocketURL + "/notify", "application/json", 
    strings.NewReader(`{"event": "servicio_contratado", "data": {...}}`))
```

#### GraphQL â†’ REST APIs

**Resolver de GraphQL consulta mÃºltiples APIs:**
```javascript
// GraphQL Resolver
const resolvers = {
  Query: {
    async toursPopulares(_, { limit }) {
      // Consultar TypeScript
      const tours = await fetch('http://localhost:3000/api/tours');
      
      // Enriquecer cada tour
      return Promise.all(tours.map(async (tour) => {
        // Consultar Python para destino
        const destino = await fetch(
          `http://localhost:5000/api/destinos/${tour.id_destino}`
        );
        
        // Consultar Golang para servicios
        const servicios = await fetch(
          'http://localhost:8080/api/servicios/batch',
          { 
            method: 'POST',
            body: JSON.stringify({ ids: tour.id_servicios })
          }
        );
        
        return { ...tour, destino, servicios };
      }));
    }
  }
};
```

---

### Manejo de AutenticaciÃ³n JWT

#### Flujo de JWT entre Servicios

1. **Python genera JWT** al hacer login:
```python
token = jwt.encode({
    'id_usuario': user.id,
    'email': user.email,
    'rol': user.rol,
    'exp': datetime.utcnow() + timedelta(hours=24)
}, JWT_SECRET, algorithm='HS256')
```

2. **Frontend guarda JWT** en localStorage
3. **Frontend envÃ­a JWT** en cada peticiÃ³n:
```javascript
axios.get('/api/tours', {
  headers: { Authorization: `Bearer ${token}` }
});
```

4. **Cada servicio valida JWT** antes de procesar:
```typescript
// Middleware en TypeScript
const jwt = require('jsonwebtoken');

const decoded = jwt.verify(token, JWT_SECRET);
// decoded = { id_usuario, email, rol, exp }
```

**Clave:** Todos los servicios deben usar el **mismo JWT_SECRET** para validar tokens.

---

### Consistencia de Datos

#### Estrategias Implementadas

**1. IDs como Referencias:**
- Cada servicio almacena SOLO los IDs de entidades externas
- No duplica datos de otros servicios
- Consulta en tiempo real para obtener informaciÃ³n actualizada

**2. ValidaciÃ³n Cruzada:**
```typescript
// Antes de crear tour, validar que existe el destino
const destino = await httpClient.getDestino(id_destino);
if (!destino) {
  throw new Error('Destino no existe');
}
```

**3. Transacciones Locales:**
- Cada servicio maneja transacciones en su propia BD
- No hay transacciones distribuidas (por simplicidad)

**4. Manejo de Errores:**
```typescript
try {
  const usuario = await httpClient.validateUser(id_usuario, token);
} catch (error) {
  // Si Python API estÃ¡ caÃ­do, retornar error amigable
  return res.status(503).json({
    success: false,
    message: 'Servicio de usuarios no disponible'
  });
}
```

---

## ğŸ“ Estructura del Proyecto

### Backend TypeScript

```
backend/moduloTypeScript
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ database.ts           # ConfiguraciÃ³n TypeORM
â”‚   â”‚   â””â”€â”€ environment.ts        # Variables de entorno
â”‚   â”‚
â”‚   â”œâ”€â”€ entities/
â”‚   â”‚   â”œâ”€â”€ Guia.entity.ts        # Modelo GuÃ­a
â”‚   â”‚   â”œâ”€â”€ Tour.entity.ts        # Modelo Tour
â”‚   â”‚   â””â”€â”€ Reserva.entity.ts     # Modelo Reserva
â”‚   â”‚
â”‚   â”œâ”€â”€ modules/
â”‚   â”‚   â”œâ”€â”€ guias/
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-guia.dto.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ update-guia.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ guia.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ guia.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ guia.routes.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ tours/
â”‚   â”‚   â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create-tour.dto.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ update-tour.dto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ tour.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ tour.service.ts
â”‚   â”‚   â”‚   â””â”€â”€ tour.routes.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ reservas/
â”‚   â”‚       â”œâ”€â”€ dto/
â”‚   â”‚       â”‚   â”œâ”€â”€ create-reserva.dto.ts
â”‚   â”‚       â”‚   â””â”€â”€ update-reserva.dto.ts
â”‚   â”‚       â”œâ”€â”€ reserva.controller.ts
â”‚   â”‚       â”œâ”€â”€ reserva.service.ts
â”‚   â”‚       â””â”€â”€ reserva.routes.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ middlewares/
â”‚   â”‚   â”œâ”€â”€ auth.middleware.ts    # Validar JWT
â”‚   â”‚   â”œâ”€â”€ validation.middleware.ts
â”‚   â”‚   â””â”€â”€ error.middleware.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ response.util.ts      # Respuestas estandarizadas
â”‚   â”‚   â””â”€â”€ http-client.util.ts   # Cliente para otros servicios
â”‚   â”‚
â”‚   â””â”€â”€ main.ts                   # Entry point
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ guias.test.ts
â”‚   â”œâ”€â”€ tours.test.ts
â”‚   â””â”€â”€ reservas.test.ts
â”‚
â”œâ”€â”€ .env
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ nodemon.json
â””â”€â”€ README.md
```

---

## ğŸ§ª Testing

### Tests Unitarios (Backend TypeScript)

#### Configurar Jest

```bash
npm install -D jest @types/jest ts-jest supertest @types/supertest
```

#### Crear `jest.config.js`:
```javascript
module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  roots: ['<rootDir>/tests'],
  testMatch: ['**/*.test.ts'],
};
```

#### Ejemplo de Test:

**tests/guias.test.ts:**
```typescript
import request from 'supertest';
import app from '../src/main';

describe('GuÃ­as API', () => {
  let token: string;

  beforeAll(async () => {
    // Obtener token de autenticaciÃ³n
    const response = await request('http://localhost:5000')
      .post('/api/auth/login')
      .send({ email: 'test@example.com', contraseÃ±a: 'test123' });
    
    token = response.body.data.token;
  });

  test('GET /api/guias - Debe listar guÃ­as', async () => {
    const response = await request(app)
      .get('/api/guias')
      .set('Authorization', `Bearer ${token}`);

    expect(response.status).toBe(200);
    expect(response.body.success).toBe(true);
    expect(Array.isArray(response.body.data)).toBe(true);
  });

  test('POST /api/guias - Debe crear un guÃ­a', async () => {
    const nuevoGuia = {
      nombre: 'Test GuÃ­a',
      idiomas: 'EspaÃ±ol, InglÃ©s',
      experiencia: '5 aÃ±os',
      email: 'guia@test.com',
      telefono: '+593999999999',
    };

    const response = await request(app)
      .post('/api/guias')
      .set('Authorization', `Bearer ${token}`)
      .send(nuevoGuia);

    expect(response.status).toBe(201);
    expect(response.body.success).toBe(true);
    expect(response.body.data.nombre).toBe(nuevoGuia.nombre);
  });
});
```

#### Ejecutar Tests:
```bash
npm test
```

---

## ğŸš€ Despliegue

### OpciÃ³n 1: Despliegue Local con Docker

#### Crear `docker-compose.yml` en la raÃ­z:

```yaml
version: '3.8'

services:
  # Base de datos TypeScript
  postgres-typescript:
    image: postgres:14
    environment:
      POSTGRES_DB: tours_db
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres123
    ports:
      - "5432:5432"
    volumes:
      - ts-data:/var/lib/postgresql/data

  # Base de datos Python
  postgres-python:
    image: postgres:14
    environment:
      POSTGRES_DB: usuarios_db
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres123
    ports:
      - "5433:5432"
    volumes:
      - py-data:/var/lib/postgresql/data

  # Base de datos Golang
  postgres-golang:
    image: postgres:14
    environment:
      POSTGRES_DB: servicios_db
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres123
    ports:
      - "5434:5432"
    volumes:
      - go-data:/var/lib/postgresql/data

  # Backend TypeScript
  typescript-api:
    build: ./backend-typescript-rest
    ports:
      - "3000:3000"
    depends_on:
      - postgres-typescript
    environment:
      DB_HOST: postgres-typescript
      DB_PORT: 5432
      PYTHON_API_URL: http://python-api:5000
      GOLANG_API_URL: http://golang-api:8080

  # Backend Python
  python-api:
    build: ./backend-python-rest
    ports:
      - "5000:5000"
    depends_on:
      - postgres-python
    environment:
      DB_HOST: postgres-python
      DB_PORT: 5432

  # Backend Golang
  golang-api:
    build: ./backend-golang-rest
    ports:
      - "8080:8080"
    depends_on:
      - postgres-golang
    environment:
      DB_HOST: postgres-golang
      DB_PORT: 5432

  # GraphQL Server
  graphql-server:
    build: ./graphql-server
    ports:
      - "4000:4000"
    depends_on:
      - typescript-api
      - python-api
      - golang-api

  # WebSocket Server
  websocket-server:
    build: ./websocket-server
    ports:
      - "8081:8081"

  # Frontend
  frontend:
    build: ./frontend
    ports:
      - "5173:5173"
    depends_on:
      - typescript-api
      - python-api
      - golang-api
      - graphql-server
      - websocket-server

volumes:
  ts-data:
  py-data:
  go-data:
```

#### Levantar todo el sistema:
```bash
docker-compose up -d
```

#### Detener todo:
```bash
docker-compose down
```

---

### OpciÃ³n 2: Despliegue Individual

Cada servicio se despliega por separado:

**TypeScript:**
```bash
npm run build
npm start
```

**Python:**
```bash
gunicorn main:app --bind 0.0.0.0:5000
```

**Golang:**
```bash
go build -o main cmd/api/main.go
./main
```

---

## ğŸ› ï¸ Troubleshooting

### Problemas Comunes

#### 1. Error de conexiÃ³n a PostgreSQL

**SÃ­ntoma:** `ECONNREFUSED localhost:5432`

**SoluciÃ³n:**
```bash
# Verificar que PostgreSQL estÃ¡ corriendo
sudo service postgresql status

# Iniciar PostgreSQL
sudo service postgresql start

# Verificar puerto
sudo netstat -tulpn | grep 5432
```

#### 2. Error "JWT must be provided"

**SÃ­ntoma:** `401 Unauthorized`

**SoluciÃ³n:**
- AsegÃºrate de incluir el header:
```bash
Authorization: Bearer <tu_token_jwt>
```

#### 3. Error "Port already in use"

**SÃ­ntoma:** `EADDRINUSE: address already in use :::3000`

**SoluciÃ³n:**
```bash
# Linux/Mac - Encontrar proceso en puerto 3000
lsof -i :3000

# Matar proceso
kill -9 <PID>

# Windows
netstat -ano | findstr :3000
taskkill /PID <PID> /F
```

#### 4. Error de migraciones TypeORM

**SÃ­ntoma:** `Table already exists`

**SoluciÃ³n:**
```bash
# Eliminar base de datos y recrear
dropdb tours_db
createdb tours_db

# O cambiar synchronize en database.ts a false
```

#### 5. Servicios externos no responden

**SÃ­ntoma:** `Service unavailable` o timeout

**SoluciÃ³n:**
- Verificar que todos los servicios estÃ¡n corriendo
- Verificar URLs en .env
- Verificar firewall/puertos

```bash
# Verificar conectividad
curl http://localhost:5000/api/destinos
curl http://localhost:8080/api/servicios
```

---

## ğŸ“– Glosario

| TÃ©rmino | DefiniciÃ³n |
|---------|------------|
| **Microservicio** | AplicaciÃ³n independiente que maneja un conjunto especÃ­fico de funcionalidades |
| **API REST** | Interfaz de programaciÃ³n que usa HTTP para comunicaciÃ³n |
| **GraphQL** | Lenguaje de consulta que permite al cliente especificar quÃ© datos necesita |
| **WebSocket** | Protocolo de comunicaciÃ³n bidireccional en tiempo real |
| **JWT** | JSON Web Token - Token de autenticaciÃ³n cifrado |
| **TypeORM** | Object-Relational Mapping para TypeScript |
| **DTO** | Data Transfer Object - Objeto para validar y transferir datos |
| **CRUD** | Create, Read, Update, Delete - Operaciones bÃ¡sicas |
| **ORM** | Object-Relational Mapping - Mapeo objeto-relacional |

---

### Equipo de Desarrollo

| Integrante | Rol | Responsabilidad | Contacto |
|------------|-----|-----------------|----------|
| Odalia Senge | Backend TypeScript | GuÃ­as, Tours, Reservas |
| Nestor Ayala | Backend Python | Usuarios, Destinos, Auth |
| Abigail Plua | Backend Golang | Servicios, Contrataciones |

### Profesor
ğŸ“§ **Email:** joancemac@gmail.com

---

## ğŸ“š Referencias y DocumentaciÃ³n

### DocumentaciÃ³n Oficial

- [Node.js](https://nodejs.org/docs/)
- [TypeScript](https://www.typescriptlang.org/docs/)
- [Express](https://expressjs.com/)
- [TypeORM](https://typeorm.io/)
- [PostgreSQL](https://www.postgresql.org/docs/)
- [Python](https://docs.python.org/)
- [Flask](https://flask.palletsprojects.com/)
- [FastAPI](https://fastapi.tiangolo.com/)
- [Go](https://go.dev/doc/)
- [Gin](https://gin-gonic.com/docs/)
- [GraphQL](https://graphql.org/learn/)
- [Apollo Server](https://www.apollographql.com/docs/apollo-server/)
- [Socket.io](https://socket.io/docs/)

### Tutoriales y GuÃ­as

- [Microservicios con Node.js](https://nodejs.org/en/docs/guides/nodejs-docker-webapp/)
- [REST API Best Practices](https://restfulapi.net/)
- [GraphQL Best Practices](https://graphql.org/learn/best-practices/)
- [JWT Authentication](https://jwt.io/introduction)

---

## ğŸ”’ Seguridad

### Mejores PrÃ¡cticas Implementadas

#### 1. AutenticaciÃ³n JWT
```typescript
// Middleware de autenticaciÃ³n
export const authMiddleware = async (req, res, next) => {
  const token = req.headers.authorization?.split(' ')[1];
  
  if (!token) {
    return res.status(401).json({ 
      success: false, 
      message: 'Token no proporcionado' 
    });
  }

  try {
    const decoded = jwt.verify(token, JWT_SECRET);
    req.user = decoded;
    next();
  } catch (error) {
    return res.status(401).json({ 
      success: false, 
      message: 'Token invÃ¡lido' 
    });
  }
};
```

#### 2. ValidaciÃ³n de Datos
```typescript
// Uso de class-validator
import { IsString, IsEmail, IsNotEmpty } from 'class-validator';

export class CreateGuiaDto {
  @IsString()
  @IsNotEmpty({ message: 'El nombre es obligatorio' })
  nombre: string;

  @IsEmail({}, { message: 'Email invÃ¡lido' })
  email: string;
}
```

#### 3. Variables de Entorno
```bash
# Nunca subir .env a GitHub
# Usar .env.example como plantilla
JWT_SECRET=valor_secreto_muy_largo_y_aleatorio
DB_PASSWORD=nunca_uses_postgres_como_password
```

#### 4. CORS Configurado
```typescript
app.use(cors({
  origin: ['http://localhost:5173'], // Solo frontend permitido
  credentials: true
}));
```

#### 5. SanitizaciÃ³n de Inputs
```typescript
// Evitar SQL injection usando TypeORM
const tour = await tourRepository.findOne({
  where: { id_tour: parseInt(id) } // Parsear a nÃºmero
});
```

#### 6. Rate Limiting (Opcional - Recomendado)
```typescript
import rateLimit from 'express-rate-limit';

const limiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 minutos
  max: 100 // LÃ­mite de 100 requests por IP
});

app.use('/api/', limiter);
```

---

## ğŸ“Š Monitoreo y Logs

### Sistema de Logs

#### Logger Middleware
```typescript
// src/middlewares/logger.middleware.ts
export const loggerMiddleware = (req, res, next) => {
  const start = Date.now();
  
  res.on('finish', () => {
    const duration = Date.now() - start;
    console.log(`[${new Date().toISOString()}] ${req.method} ${req.url} - ${res.statusCode} - ${duration}ms`);
  });
  
  next();
};
```

#### Logs en ProducciÃ³n
```bash
# Usar una herramienta como Winston
npm install winston

# Configurar niveles de log
- error: Errores crÃ­ticos
- warn: Advertencias
- info: InformaciÃ³n general
- debug: Debugging
```

---

## ğŸ¨ Buenas PrÃ¡cticas de CÃ³digo

### Convenciones de Nombrado

#### TypeScript/JavaScript
```typescript
// Variables y funciones: camelCase
const userName = 'Juan';
function getUserById(id) { }

// Clases: PascalCase
class UserService { }

// Constantes: UPPER_SNAKE_CASE
const MAX_RETRY_ATTEMPTS = 3;

// Interfaces: PascalCase con I (opcional)
interface IUser { }
```

#### Python
```python
# Variables y funciones: snake_case
user_name = 'Juan'
def get_user_by_id(id):
    pass

# Clases: PascalCase
class UserService:
    pass

# Constantes: UPPER_SNAKE_CASE
MAX_RETRY_ATTEMPTS = 3
```

#### Golang
```go
// Exportadas: PascalCase
type User struct { }
func GetUserByID(id int) { }

// Privadas: camelCase
func getUserData() { }
```

### Estructura de Commits

```bash
# Formato recomendado
tipo(alcance): descripciÃ³n corta

# Tipos:
feat: Nueva funcionalidad
fix: CorrecciÃ³n de bug
docs: DocumentaciÃ³n
style: Formato de cÃ³digo
refactor: RefactorizaciÃ³n
test: Tests
chore: Tareas de mantenimiento

# Ejemplos:
feat(guias): agregar endpoint para crear guÃ­a
fix(tours): corregir validaciÃ³n de precio
docs(readme): actualizar instrucciones de instalaciÃ³n
```

---

## ğŸŒ Variables de Entorno

### Archivo .env.example Completo

#### Backend TypeScript
```env
# SERVIDOR
PORT=3000
NODE_ENV=development

# BASE DE DATOS
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=postgres
DB_PASSWORD=
DB_DATABASE=tours_db

# SEGURIDAD
JWT_SECRET=

# SERVICIOS EXTERNOS
PYTHON_API_URL=http://localhost:5000
GOLANG_API_URL=http://localhost:8080
GRAPHQL_API_URL=http://localhost:4000
WEBSOCKET_URL=http://localhost:8081

# LOGS
LOG_LEVEL=info
```

#### Backend Python
```env
# SERVIDOR
PORT=5000
FLASK_ENV=development

# BASE DE DATOS
DATABASE_URL=postgresql://postgres:password@localhost:5432/usuarios_db

# SEGURIDAD
JWT_SECRET=
JWT_EXPIRATION_HOURS=24

# SERVICIOS EXTERNOS
TYPESCRIPT_API_URL=http://localhost:3000
GOLANG_API_URL=http://localhost:8080
```

#### Backend Golang
```env
# SERVIDOR
PORT=8080
GIN_MODE=debug

# BASE DE DATOS
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=
DB_NAME=servicios_db

# SERVICIOS EXTERNOS
TYPESCRIPT_API_URL=http://localhost:3000
PYTHON_API_URL=http://localhost:5000
```

---

## ğŸ“¦ Comandos Ãštiles

### Backend TypeScript

```bash
# Desarrollo
npm run dev              # Inicia con nodemon (recarga automÃ¡tica)
npm start                # Inicia en modo producciÃ³n
npm run build            # Compila TypeScript a JavaScript

# Testing
npm test                 # Ejecuta todos los tests
npm run test:watch       # Tests en modo watch
npm run test:coverage    # Tests con cobertura

# Linting
npm run lint             # Revisa cÃ³digo
npm run lint:fix         # Corrige errores automÃ¡ticamente

# Base de datos
npm run typeorm migration:generate -- -n NombreMigration
npm run typeorm migration:run
```

### Backend Python

```bash
# Entorno virtual
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows

# Dependencias
pip install -r requirements.txt
pip freeze > requirements.txt

# Desarrollo
python main.py                    # Flask
uvicorn main:app --reload         # FastAPI

# Testing
pytest
pytest --cov=app tests/

# Base de datos
alembic init alembic
alembic revision --autogenerate -m "Initial migration"
alembic upgrade head
```

### Backend Golang

```bash
# Dependencias
go mod init
go mod tidy
go get <paquete>

# Desarrollo
go run cmd/api/main.go

# Build
go build -o main cmd/api/main.go
./main

# Testing
go test ./...
go test -cover ./...

# Format
go fmt ./...
```

### Docker

```bash
# Construir y levantar todos los servicios
docker-compose up -d

# Ver logs
docker-compose logs -f [servicio]

# Detener
docker-compose down

# Reconstruir
docker-compose up -d --build

# Limpiar todo
docker-compose down -v
```

---

## ğŸ”„ Workflows de Git

### Branching Strategy

```bash
# Branch principal
main (producciÃ³n)

# Branch de desarrollo
develop

# Features branches
feature/nombre-funcionalidad

# Bugfix branches
bugfix/descripcion-bug

# Ejemplo de workflow:
git checkout develop
git checkout -b feature/crear-reservas
# ... hacer cambios ...
git add .
git commit -m "feat(reservas): implementar creaciÃ³n de reservas"
git push origin feature/crear-reservas
# ... crear Pull Request a develop ...
```

### Pull Request Template

```markdown
## DescripciÃ³n
Breve descripciÃ³n de los cambios

## Tipo de cambio
- [ ] Nueva funcionalidad
- [ ] CorrecciÃ³n de bug
- [ ] RefactorizaciÃ³n
- [ ] DocumentaciÃ³n

## Checklist
- [ ] El cÃ³digo compila sin errores
- [ ] Se agregaron tests
- [ ] Se actualizÃ³ la documentaciÃ³n
- [ ] Se probÃ³ localmente

## Screenshots (si aplica)
```

---

## ğŸ“ˆ MÃ©tricas y KPIs del Proyecto

### MÃ©tricas TÃ©cnicas

| MÃ©trica | Objetivo | Estado |
|---------|----------|--------|
| Cobertura de tests | > 70% | ğŸŸ¡ En progreso |
| Tiempo de respuesta API | < 200ms | âœ… Cumplido |
| Uptime | > 99% | âœ… Cumplido |
| APIs documentadas | 100% | âœ… Cumplido |
| Endpoints funcionales | 100% | âœ… Cumplido |

### MÃ©tricas de Negocio

- Total de tours registrados
- Total de reservas activas
- GuÃ­as disponibles
- Destinos mÃ¡s populares
- Ingresos totales

---

## ğŸ“ Aprendizajes Clave

### Competencias Desarrolladas

1. **Arquitectura de Software**
   - DiseÃ±o de microservicios
   - ComunicaciÃ³n entre servicios
   - SeparaciÃ³n de responsabilidades

2. **Desarrollo Backend**
   - APIs REST en mÃºltiples lenguajes
   - ORMs y bases de datos
   - AutenticaciÃ³n y autorizaciÃ³n

3. **IntegraciÃ³n de TecnologÃ­as**
   - GraphQL para agregaciÃ³n de datos
   - WebSockets para tiempo real
   - HTTP para comunicaciÃ³n sÃ­ncrona

4. **Buenas PrÃ¡cticas**
   - CÃ³digo limpio y mantenible
   - ValidaciÃ³n de datos
   - Manejo de errores
   - DocumentaciÃ³n tÃ©cnica

5. **Trabajo en Equipo**
   - Control de versiones con Git
   - RevisiÃ³n de cÃ³digo
   - ComunicaciÃ³n efectiva
   - ResoluciÃ³n de conflictos

---

## ğŸš€ PrÃ³ximos Pasos y Mejoras

### Features Futuros

- [ ] Implementar sistema de pagos (Stripe/PayPal)
- [ ] Agregar sistema de calificaciones y reviews
- [ ] Implementar chat en tiempo real entre usuarios y guÃ­as
- [ ] Agregar sistema de notificaciones por email
- [ ] Implementar cachÃ© con Redis
- [ ] Agregar internacionalizaciÃ³n (i18n)
- [ ] Implementar bÃºsqueda avanzada con Elasticsearch
- [ ] Agregar sistema de cupones y descuentos
- [ ] Implementar anÃ¡lisis de datos con Power BI
- [ ] Agregar geolocalizaciÃ³n con Google Maps

### Mejoras TÃ©cnicas

- [ ] Implementar CI/CD con GitHub Actions
- [ ] Agregar monitoreo con Prometheus/Grafana
- [ ] Implementar rate limiting
- [ ] Agregar documentaciÃ³n Swagger/OpenAPI
- [ ] Implementar versionado de API
- [ ] Agregar healthchecks
- [ ] Implementar circuit breakers
- [ ] Optimizar queries de base de datos
- [ ] Agregar Ã­ndices en BD
- [ ] Implementar logging centralizado

---

## ğŸ“„ Licencia

Este proyecto es parte de un trabajo acadÃ©mico para el curso de Desarrollo de Software.

**Universidad:** Eloy Alfaro de ManabÃ­  
**Curso:** Quinto A  
**Profesor:** Ing. JOHN CEVALLOS (joancemac@gmail.com)  
**Fecha:** Octubre 2025  

---

## ğŸ™ Agradecimientos

- Profesor JOHN CEVALLOS por la guÃ­a y apoyo
- CompaÃ±eros de equipo por la colaboraciÃ³n
- Comunidad open source por las herramientas utilizadas
- DocumentaciÃ³n oficial de cada tecnologÃ­a

---

## ğŸ“ FAQ - Preguntas Frecuentes

### Â¿Por quÃ© usar 3 lenguajes diferentes?

Para demostrar habilidades en mÃºltiples tecnologÃ­as y entender cÃ³mo integrar sistemas heterogÃ©neos, lo cual es comÃºn en empresas reales.

### Â¿Por quÃ© cada servicio tiene su propia base de datos?

Es un principio de microservicios: cada servicio debe ser independiente y responsable de sus propios datos. Esto permite escalabilidad y mantenimiento independiente.

### Â¿QuÃ© pasa si un servicio estÃ¡ caÃ­do?

Los demÃ¡s servicios pueden seguir funcionando. Se implementa manejo de errores para casos donde un servicio externo no responde.

### Â¿CuÃ¡ndo usar REST vs GraphQL?

- **REST:** Para operaciones CRUD individuales (crear, editar, eliminar)
- **GraphQL:** Para consultas complejas que combinan datos de mÃºltiples fuentes

### Â¿Es necesario Docker?

No es obligatorio para desarrollo local, pero facilita el despliegue y garantiza que todos trabajen con el mismo entorno.

### Â¿CÃ³mo se manejan las transacciones distribuidas?

Por simplicidad, no se implementan transacciones distribuidas. Cada servicio maneja sus transacciones localmente.

### Â¿QuÃ© pasa con los datos si elimino un tour que tiene reservas?

El sistema valida que no existan reservas activas antes de permitir la eliminaciÃ³n.

---

## ğŸ“š Recursos Adicionales

### Tutoriales Recomendados

- [Microservices Architecture](https://microservices.io/)
- [REST API Design Best Practices](https://restfulapi.net/)
- [GraphQL Tutorial](https://www.howtographql.com/)
- [WebSocket Tutorial](https://javascript.info/websocket)

### Libros Recomendados

- "Building Microservices" - Sam Newman
- "Designing Data-Intensive Applications" - Martin Kleppmann
- "Clean Code" - Robert C. Martin
- "The Pragmatic Programmer" - David Thomas

---

**ğŸ‰ Â¡Proyecto Completo y Listo para Entregar! ğŸ‰**

---

*Ãšltima actualizaciÃ³n: Octubre 6, 2025*  
*VersiÃ³n: 1.0.0*  
*Desarrollado con â¤ï¸ por el equipo de desarrollo*